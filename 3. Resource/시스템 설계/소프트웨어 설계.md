# 소프트웨어 설계
## 배타적 선택
각 관점별로 배타적 선택으로 적용하는 패턴
다양한 조합이 가능하지만, 권장되는 조합이 존재함

### 1. 비즈니스 로직 관점
- 트랜잭션 스크립트 패턴: 서비스 계층에서 절차적으로 비즈니스 로직을 구현하는 패턴
- 도메인 모델 패턴: DDD에서 사용되는 패턴으로, 비즈니스 도메인을 중심으로 각 도메인에 비즈니스 로직을 구현하는 패턴

### 2. 데이터베이스 접근 관점
- SQL Mapper: 객체와 SQL을 매핑하여 데이터베이스 접근을 지원하는 방식 (MyBatis, iBatis)
- ORM (Object Relationship Mapping): 객체와 관계형데이터베이스를 자동으로 매핑하여 접근을 지원하는 방식 (JPA/Hibernate)

### 3. 설계 구조 관점
- 계층형 아키텍처: Presentation, Business, Data Access 계층을 수평으로 분리한 설계 구조
- 헥사고날 아키텍처: 비즈니스 로직을 중심에 두고, 외부 의존성을 포트와 어댑터로 분리한 설계 구조
- 클린 아키텍처: 의존성 방향을 안쪽(도메인)으로 향하게 한 동심원 모양의 설계 구조

### 4. 배포 관점
- 모놀리스 (Monolithic): 모든 기능이 하나의 배포 단위로 통합된 구조
- 모듈러 모놀리스 (Modular Monolith): 모놀리스 내부를 모듈로 분리하되 단일 배포 유지. 모듈리스라고도 불림
- 마이크로서비스 (Microservices): 비즈니스 기능별로 독립 배포 가능한 작은 서비스들로 분산
- 서버리스 (Serverless): 서버 관리 없이 함수 단위로 실행되는 이벤트 기반 구조

### 5. 인프라 관점
- 온프레미스 (On-Premise): 자체 데이터센터에서 직접 서버 운영
- IaaS (Infrastructure as a Service): 가상 서버, 네트워크 등 인프라를 클라우드에서 제공 (AWS EC2, Azure VM)
- PaaS (Platform as a Service): 애플리케이션 실행 플랫폼을 제공하고 인프라 관리는 제공자가 담당 (Heroku, Cloud Foundry)
- CaaS (Container as a Service): 컨테이너 실행 환경을 서비스로 제공 (AWS ECS, Google GKE)
- FaaS (Function as a Service): 함수 단위 실행 환경 제공 (AWS Lambda, Azure Functions)

### 6. 설계 프로세스 관점
- 도메인 주도 개발 (Domain-Driven Development): 비즈니스 도메인을 중심으로 설계 및 개발하는 방법
- 데이터베이스 주도 개발 (Database-Driven Development): 데이터 모델과 스키마를 먼저 설계하고 개발하는 방법


## 다중 선택
용도에 따라 혼용해서 채택할 수 있는 패턴

### 1. 데이터 흐름 관점
- CQRS (Command Query Responsibility Segregation): 데이터 변경(Command)과 조회(Query)의 모델과 경로를 분리
- Event Sourcing: 상태 변경을 이벤트로 저장하고 현재 상태를 이벤트 재생으로 구성
- Saga 패턴: 분산 트랜잭션을 여러 로컬 트랜잭션의 시퀀스와 보상 트랜잭션으로 관리

### 2. 통신 관점
- 이벤트 기반 아키텍처 (Event-Driven Architecture): 이벤트 발생과 처리를 비동기로 분리하여 느슨한 결합 구현
- 메시지 기반 아키텍처 (Message-Driven Architecture): 메시지 큐를 통한 비동기 서비스 간 통신
- REST 기반 아키텍처: HTTP/REST API로 동기 통신하는 구조
- gRPC 기반 아키텍처: Protocol Buffers와 HTTP/2 기반의 고성능 RPC 통신

### 3. 개발 프로세스 관점
- 테스트 주도 개발 (Test-Driven Development): 테스트를 먼저 작성하고, 이를 통과하는 코드를 개발하는 방법
- 행위 주도 개발 (Behavior-Driven Development): 비즈니스 가치와 행위를 명세화하고 테스트하는 개발 방식


## 권장되는 조합
### 전통 웹 애플리케이션
```
- 비즈니스 로직: 트랜잭션 스크립트 패턴
- DB 접근: SQL Mapper 또는 ORM
- 구조: 계층형 아키텍처
- 배포: 모놀리스
- 통신: REST
- 인프라: IaaS
```

### 현대적 엔터프라이즈 시스템
```
- 비즈니스 로직: 도메인 모델 패턴
- DB 접근: ORM (JPA)
- 구조: 헥사고날 아키텍처 또는 클린 아키텍처
- 데이터 흐름: CQRS
- 배포: 모듈러 모놀리스
- 통신: REST + 이벤트 기반
- 인프라: PaaS
```

### 대규모 MSA 시스템
```
- 비즈니스 로직: 도메인 모델 패턴
- DB 접근: ORM (JPA)
- 구조: 헥사고날 아키텍처 또는 클린 아키텍처
- 데이터 흐름: CQRS + Event Sourcing + Saga + Database per Service
- 배포: 마이크로서비스
- 통신: 이벤트 기반 (Kafka) + gRPC
- 인프라: CaaS (Kubernetes)
```